(this["webpackJsonplocale-assignment"]=this["webpackJsonplocale-assignment"]||[]).push([[0],{60:function(e,t,a){e.exports=a(97)},65:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(1),o=a.n(n),r=a(31),l=a.n(r),i=(a(65),a(14)),c=a(6),u=a(19),s=a(32),p=a(5),d=a(4),f=a(8),m=a(7),h=a(9),v=a(33);function b(e,t){var a=Math.pow(10,t);return Math.round(e*a)/a}var y=function(e){function t(){var e,a;Object(p.a)(this,t);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(a=Object(f.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(o))))._redraw=function(e){var t=e.width,n=e.height,o=e.ctx,r=e.isDragging,l=e.project,i=(e.unproject,a.props),c=i.dotRadius,u=i.dotFill,s=i.compositeOperation,p=i.renderWhileDragging,d=i.locations,f=i.lngLatAccessor;if(o.clearRect(0,0,t,n),o.globalCompositeOperation=s,(p||!r)&&d){var m=!0,h=!1,v=void 0;try{for(var y,E=d[Symbol.iterator]();!(m=(y=E.next()).done);m=!0){var g=l(f(y.value)),k=[b(g[0],1),b(g[1],1)];k[0]+c>=0&&k[0]-c<t&&k[1]+c>=0&&k[1]-c<n&&(o.fillStyle=u,o.beginPath(),o.arc(k[0],k[1],c,0,2*Math.PI),o.fill())}}catch(D){h=!0,v=D}finally{try{m||null==E.return||E.return()}finally{if(h)throw v}}}},a}return Object(h.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return o.a.createElement(v.a,{redraw:this._redraw})}}]),t}(n.PureComponent);y.displayName="ScatterplotOverlay",y.defaultProps={lngLatAccessor:function(e){return[e.get(0),e.get(1)]},renderWhileDragging:!0,dotRadius:4,dotFill:"#1FBAD6",globalOpacity:1,compositeOperation:"source-over"};a(70);var E=Object(u.b)((function(e){return{data:e.data,mapData:e.map}}),(function(e){return{addMonthlyData:function(t){return e(function(e){return{type:"ADD_MONTHLY_DATA",payload:e}}(t))},addHourlyData:function(t){return e(function(e){return console.log("here"),{type:"ADD_HOURLY_DATA",payload:e}}(t))},addBookingData:function(t){return e(function(e){return{type:"ADD_BOOKING_DATA",payload:e}}(t))},addDistanceData:function(t){return e(function(e){return{type:"ADD_DISTANCE_DATA",payload:e}}(t))},addTravelTypeData:function(t){return e(function(e){return{type:"ADD_TRAVEL_TYPE_DATA",payload:e}}(t))}}}))((function(e){var t=Object(n.useState)({data:[],pickups:[],dropoffs:[]}),a=Object(c.a)(t,2),r=a[0],l=a[1],u=Object(n.useState)(""),p=Object(c.a)(u,2),d=p[0],f=p[1],m=Object(n.useState)(),h=Object(c.a)(m,2),b=h[0],E=h[1],g=Object(n.useState)({latitude:12.972442,longitude:77.580643,zoom:11,center:[0,0],height:"70vh",width:"60vw"}),k=Object(c.a)(g,2),D=k[0],A=k[1],O=Object(n.useState)(!0),M=Object(c.a)(O,2),_=M[0],j=M[1],w=Object(n.useState)(!1),T=Object(c.a)(w,2),S=T[0],x=T[1],N=function(e){var t=[],a=[];if("all"===e){var n=!0,o=!1,c=void 0;try{for(var u,s=r.data[Symbol.iterator]();!(n=(u=s.next()).done);n=!0){var p=u.value;p.pickup&&void 0!==p.position&&t.push(p.position),p.pickup||void 0===p.position||a.push(p.position)}}catch(y){o=!0,c=y}finally{try{n||null==s.return||s.return()}finally{if(o)throw c}}}else{var d=!0,f=!1,m=void 0;try{for(var h,v=r.data[Symbol.iterator]();!(d=(h=v.next()).done);d=!0){var b=h.value;b.booked_through===e&&(b.pickup&&void 0!==b.position&&t.push(b.position),b.pickup||void 0===b.position||a.push(b.position))}}catch(y){f=!0,m=y}finally{try{d||null==v.return||v.return()}finally{if(f)throw m}}}l((function(e){return Object(i.a)({},e,{pickups:t,dropoffs:a})}))};return Object(n.useEffect)((function(){if(e.data.data){var t=function(t){var a=[],n=[],o=[],r={},l={},i={},c={},u={},s=!0,p=!1,d=void 0;try{for(var f,m=t[Symbol.iterator]();!(s=(f=m.next()).done);s=!0){var h=f.value,v=void 0;"1"===h.online_booking?(v="online",1):"1"===h.mobile_site_booking?(v="mobile",1):(v="others",1);var b=void 0,y=void 0;"NULL"!==h.from_date&&(b=h.from_date.split(" ")[1].split(":")[0]).length<2&&(b="0"+b),"NULL"!==h.to_date&&(y=h.to_date.split(" ")[1].split(":")[0]).length<2&&(y="0"+y);var E=void 0,g=void 0;switch("NULL"!==h.from_long&&(E=[Number(h.from_long),Number(h.from_lat)]),"NULL"!==h.to_long&&(g=[Number(h.to_long),Number(h.to_lat)]),h.travel_type_id){case"1":u["Long distance"]=u["Long distance"]?u["Long distance"]+1:1;break;case"2":u["Point to point"]=u["Point to point"]?u["Point to point"]+1:1;break;case"3":u["Hourly Rental"]=u["Hourly Rental"]?u["Hourly Rental"]+1:1;break;default:u.Others=u.Others?u.Others+1:1}switch(h.package_id){case"1":c["<=40kms"]=c["<=40kms"]?c["<=40kms"]+1:1;break;case"2":c["<=80kms"]=c["<=80kms"]?c["<=80kms"]+1:1;break;case"3":c["<=60kms"]=c["<=60kms"]?c["<=60kms"]+1:1;break;case"4":c["<=100kms"]=c["<=100kms"]?c["<=100kms"]+1:1;break;case"5":c["<=50kms"]=c["<=50kms"]?c["<=50kms"]+1:1;break;case"6":c["<=30kms"]=c["<=30kms"]?c["<=30kms"]+1:1;break;case"7":c["<=120kms"]=c["<=120kms"]?c["<=120kms"]+1:1;break;default:c.others=c.others?c.others+1:1}var k=void 0,D=new Array;D[0]="January",D[1]="February",D[2]="March",D[3]="April",D[4]="May",D[5]="June",D[6]="July",D[7]="August",D[8]="September",D[9]="October",D[10]="November",D[11]="December",h.from_date&&(k=D[new Date(h.from_date.split(" ")[0]).getMonth()]);var A={position:E,hour:b,booked_through:v,pickup:!0,month:k};r[A.month]=r[A.month]?r[A.month]+1:1,l[A.hour]=l[A.hour]?l[A.hour]+1:1,i[A.booked_through]=i[A.booked_through]?i[A.booked_through]+1:1;var O={position:g,hour:y||null,booked_through:v,pickup:!1};a.push(A),g&&void 0!==g[0]&&o.push(g),E&&void 0!==E[0]&&n.push(E),a.push(O)}}catch(M){p=!0,d=M}finally{try{s||null==m.return||m.return()}finally{if(p)throw d}}return e.addTravelTypeData(u),e.addBookingData(i),e.addHourlyData(l),e.addMonthlyData(r),e.addDistanceData(c),[a,n,o]}(e.data.data);l((function(e){return{data:t[0],pickups:t[1],dropoffs:t[2]}}))}}),[e.data]),o.a.createElement("div",{className:"Map-Container"},o.a.createElement("div",{className:"Map-Actual"},o.a.createElement("p",null,"Upload your csv file on the left, filter the results on the right and check out the graphs down below!"),o.a.createElement(v.b,Object.assign({},D,{onViewportChange:function(e){return A(e)},mapStyle:"mapbox://styles/dextrous24/ck4jfn3n011fm1cqpsvetwpmr",mapboxApiAccessToken:"pk.eyJ1IjoiZGV4dHJvdXMyNCIsImEiOiJjazRqZXpsankxMDY2M21uenh5cXF6ZHprIn0.ky8FY-wVExN1IclibDMxGg",className:"map-div"}),_&&o.a.createElement(y,{locations:s.a.fromJS(r.pickups),dotRadius:5,globalOpacity:1,compositeOperation:"lighter",dotFill:"lightgreen",renderWhileDragging:!0}),S&&o.a.createElement(y,{locations:s.a.fromJS(r.dropoffs),dotRadius:5,globalOpacity:1,compositeOperation:"source-over",dotFill:"crimson",renderWhileDragging:!0})),o.a.createElement("p",null,"* Dropoffs are off by default, please toggle with the filter on the right.")),o.a.createElement("div",{className:"Btn-Container"},o.a.createElement("button",{onClick:function(){return N("mobile")}},"Only Mobile "),o.a.createElement("button",{onClick:function(){return N("online")}},"Only Online "),o.a.createElement("button",{onClick:function(){return N("others")}},"Only others "),o.a.createElement("button",{onClick:function(){N("all")}},"Show all"," "),o.a.createElement("button",{onClick:function(){return j((function(e){return!e}))}},"Toggle pickups"),o.a.createElement("button",{onClick:function(){return x((function(e){return!e}))}},"Toggle dropoffs"," "),o.a.createElement("button",{onClick:function(){return function(){var e=[],t=[],a=!0,n=!1,o=void 0;try{for(var c,u=r.data[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var s=c.value;s.hour==b&&(s.pickup&&void 0!==s.position&&e.push(s.position),s.pickup||void 0===s.position||t.push(s.position))}}catch(p){n=!0,o=p}finally{try{a||null==u.return||u.return()}finally{if(n)throw o}}l((function(a){return Object(i.a)({},a,{pickups:e,dropoffs:t})}))}()}},"Filter by time "),o.a.createElement("select",{name:"monthfilter",onChange:function(e){E(e.target.value)}},o.a.createElement("option",{value:0},"12 :00 AM"),o.a.createElement("option",{value:1},"1 :00 AM"),o.a.createElement("option",{value:2},"2 :00 AM"),o.a.createElement("option",{value:3},"3 :00 AM"),o.a.createElement("option",{value:4},"4 :00 AM"),o.a.createElement("option",{value:5},"5 :00 AM"),o.a.createElement("option",{value:6},"6 :00 AM"),o.a.createElement("option",{value:7},"7 :00 AM"),o.a.createElement("option",{value:8},"8 :00 AM"),o.a.createElement("option",{value:9},"9 :00 AM"),o.a.createElement("option",{value:10},"10 :00 AM"),o.a.createElement("option",{value:11},"11 :00 AM"),o.a.createElement("option",{value:12},"12 :00 PM"),o.a.createElement("option",{value:13},"1 :00 PM"),o.a.createElement("option",{value:14},"2 :00 PM"),o.a.createElement("option",{value:15},"3 :00 PM"),o.a.createElement("option",{value:16},"4 :00 PM"),o.a.createElement("option",{value:17},"5 :00 PM"),o.a.createElement("option",{value:18},"6 :00 PM"),o.a.createElement("option",{value:19},"7 :00 PM"),o.a.createElement("option",{value:20},"8 :00 PM"),o.a.createElement("option",{value:21},"9 :00 PM"),o.a.createElement("option",{value:22},"10 :00 PM"),o.a.createElement("option",{value:23},"11 :00 PM")),o.a.createElement("button",{onClick:function(){return function(){var e=[],t=[];if(""!==d){var a=!0,n=!1,o=void 0;try{for(var c,u=r.data[Symbol.iterator]();!(a=(c=u.next()).done);a=!0){var s=c.value;s.month==d&&(s.pickup&&void 0!==s.position&&e.push(s.position),s.pickup||void 0===s.position||t.push(s.position))}}catch(p){n=!0,o=p}finally{try{a||null==u.return||u.return()}finally{if(n)throw o}}l((function(a){return Object(i.a)({},a,{pickups:e,dropoffs:t})}))}}()}},"Filter by Month "),o.a.createElement("select",{name:"monthfilter",onChange:function(e){f(e.target.value)}},o.a.createElement("option",{value:"January"},"January"),o.a.createElement("option",{value:"February"},"February"),o.a.createElement("option",{value:"March"},"March"),o.a.createElement("option",{value:"April"},"April"),o.a.createElement("option",{value:"May"},"May"),o.a.createElement("option",{value:"June"},"June"),o.a.createElement("option",{value:"July"},"July"),o.a.createElement("option",{value:"August"},"August"),o.a.createElement("option",{value:"September"},"September"),o.a.createElement("option",{value:"October"},"October"),o.a.createElement("option",{value:"November"},"November"),o.a.createElement("option",{value:"December"},"December"))))})),g=(a(71),a(56)),k=a.n(g);var D=Object(u.b)((function(e){return{data:e.data}}),(function(e){return{addData:function(t){return e(function(e){return{type:"ADD_DATA",payload:e}}(t))}}}))((function(e){var t=Object(n.useState)([]),a=Object(c.a)(t,2);return a[0],a[1],o.a.createElement("div",{className:"File-Container"},o.a.createElement(k.a,{fileTypes:".csv",handleFiles:function(t){var a=new FileReader;a.readAsText(t[0]),a.onload=function(){e.addData(function(e){for(var t=e.split("\n"),a=[],n=t[0].split(","),o=1;o<t.length;o++){for(var r={},l=t[o].split(","),i=0;i<n.length;i++)r[n[i]]=l[i];a.push(r)}return a.pop(),a}(a.result))}}},o.a.createElement("button",{className:"btn",id:"uploadbtn"},"Upload a csv file")))})),A=a(21),O=(a(73),[]),M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_DATA":return{data:t.payload};default:return e}},_={monthlyData:[],hourlyData:[],bookingData:[],distanceData:[],travelTypeData:[]},j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_MONTHLY_DATA":return Object(i.a)({},e,{monthlyData:t.payload});case"ADD_HOURLY_DATA":return Object(i.a)({},e,{hourlyData:t.payload});case"ADD_BOOKING_DATA":return Object(i.a)({},e,{bookingData:t.payload});case"ADD_DISTANCE_DATA":return Object(i.a)({},e,{distanceData:t.payload});case"ADD_TRAVEL_TYPE_DATA":return Object(i.a)({},e,{travelTypeData:t.payload});default:return e}},w=Object(A.c)({data:M,map:j});var T=Object(A.d)(w,A.a.apply(void 0,[]));a(74);function S(){return o.a.createElement("div",{className:"Navbar"},o.a.createElement("p",null,"Ride Analytics, the only tool you'll need to understand your business."))}a(75),a(76);var x=a(10);var N=Object(u.b)((function(e){return{mapData:e.map}}))((function(e){var t=Object(n.useState)("hour"),a=Object(c.a)(t,2),r=a[0],l=a[1],i=e.mapData,u=i.monthlyData,s=i.hourlyData,p=i.bookingData,d=i.distanceData,f=i.travelTypeData,m=[],h=[],v=[],b=[],y=[],E=0;for(var g in s){var k={};k.x=g,k.y=s[g],h.push(k)}for(var D in u){var A={};A.x=D,A.y=u[D],m.push(A)}for(var O in p)E+=p[O];for(var M in p){var _={};_.x=M,_.y=p[M],_.angle=Math.floor(p[M]/E*360),_.label=M,_.subLabel=Math.floor(p[M]/E*100),v.push(_)}for(var j in d){var w={};w.x=j,w.y=d[j],b.push(w)}for(var T in f){var S={};S.x=T,S.y=f[T],S.angle=Math.floor(f[T]/E*360),S.label=T,S.subLabel=Math.floor(f[T]/E*100),y.push(S)}return console.log(h,m,v),o.a.createElement("div",{className:"charts-container"},o.a.createElement("div",{className:"charts"},"hour"===r&&o.a.createElement(x.d,{height:400,width:765,xType:"ordinal",color:"#1adb87"},o.a.createElement(x.c,{title:"Hour of the day",style:{text:{fill:"#fff",fontSize:15}}}),o.a.createElement(x.e,{style:{text:{fill:"#fff",fontSize:12}},tickSizeOuter:0}),o.a.createElement(x.b,{data:h})),"month"===r&&o.a.createElement(x.d,{height:400,width:900,xType:"ordinal",stroke:"#1adb87"},o.a.createElement(x.c,{style:{text:{fill:"#fff",fontSize:13}}}),o.a.createElement(x.e,{style:{text:{fill:"#fff",fontSize:12}},tickSizeOuter:0}),o.a.createElement(x.a,{data:m})),"booking"===r&&o.a.createElement(x.d,{height:400,width:700,xType:"ordinal",color:"#1adb87"},o.a.createElement(x.c,{style:{text:{fill:"#fff",fontSize:15}}}),o.a.createElement(x.e,{style:{text:{fill:"#fff",fontSize:12}},tickSizeOuter:0,tickPadding:0}),o.a.createElement(x.b,{data:v})),"distance"===r&&o.a.createElement(x.d,{height:400,width:700,xType:"ordinal",color:"#1adb87"},o.a.createElement(x.c,{style:{text:{fill:"#fff",fontSize:15}}}),o.a.createElement(x.e,{style:{text:{fill:"#fff",fontSize:12}},tickSizeOuter:0,tickPadding:0}),o.a.createElement(x.b,{data:b})),"travelType"===r&&o.a.createElement(x.d,{height:400,width:700,xType:"ordinal",color:"#1adb87"},o.a.createElement(x.c,{style:{text:{fill:"#fff",fontSize:15}}}),o.a.createElement(x.e,{style:{text:{fill:"#fff",fontSize:12}},tickSizeOuter:0,tickPadding:0}),o.a.createElement(x.b,{data:y}))),o.a.createElement("div",{className:"charts-btns"},o.a.createElement("button",{onClick:function(){return l("hour")}},"Pickups by the hour"),o.a.createElement("button",{onClick:function(){return l("booking")}},"Modes of booking"),o.a.createElement("button",{onClick:function(){return l("month")}},"Monthly ride frequency"),o.a.createElement("button",{onClick:function(){return l("distance")}},"Rides by distance"),o.a.createElement("button",{onClick:function(){return l("travelType")}},"Travel type ")))}));var C=function(){return o.a.createElement(u.a,{store:T},o.a.createElement("div",{className:"App"},o.a.createElement(S,null),o.a.createElement("div",{className:"Top-Container"},o.a.createElement(D,null),o.a.createElement(E,null)),o.a.createElement(N,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(C,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[60,1,2]]]);
//# sourceMappingURL=main.f9e74d61.chunk.js.map